"use strict";function SettingsContact(e,t){return{getFromJSON:function(a){var r=t.defer(),n="",i=[],o="http://52.19.92.65/api/profile/contact/";return e.get(o).then(function(e){var t=e.data;r.resolve({contact:t})})["catch"](function(e){r.reject(e)}),r.promise},update:function(a){var r=t.defer();return e.post("http://52.19.92.65/api/profile/contact/",{data:a}).then(function(e){var t=result.data;r.resolve({contact:t})})["catch"](function(e){r.reject(e)}),r.promise}}}function SettingsDiscovery(e,t){return{getFromJSON:function(a){var r=t.defer(),n="",i=[],o="http://52.19.92.65/api/profile/discovery/";return e.get(o).then(function(e){var t=e.data;r.resolve({discovery:t})})["catch"](function(e){r.reject(e)}),r.promise},update:function(a){var r=t.defer();return e.post("http://52.19.92.65/api/profile/discovery/",{data:a}).then(function(e){var t=e.data;r.resolve({discovery:t})})["catch"](function(e){r.reject(e)}),r.promise}}}function SettingsTags(e,t){return{getFromJSON:function(a){var r=t.defer(),n="",i=[],o="http://52.19.92.65/api/profile/tags/";return e.get(o).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({text:e.data[a].tag,id:e.data[a].id});r.resolve({tags:t})})["catch"](function(e){r.reject(e)}),r.promise},update:function(a){var r=t.defer();return e.post("http://52.19.92.65/api/profile/tags/",{data:a}).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({text:e.data[a].tag,id:e.data[a].id});r.resolve({tags:t})})["catch"](function(e){r.reject(e)}),r.promise},"delete":function(a){var r=t.defer();return e["delete"]("http://52.19.92.65/api/profile/tags/"+a).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({text:e.data[a].tag,id:e.data[a].id});r.resolve({tags:t})})["catch"](function(e){r.reject(e)}),r.promise}}}function SettingsLanguages(e,t){return{getFromJSON:function(a){var r=t.defer(),n="",i=[],o="http://52.19.92.65/api/profile/languages/";return e.get(o).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({text:e.data[a].language,id:e.data[a].id});r.resolve({languages:t})})["catch"](function(e){r.reject(e)}),r.promise},update:function(a){var r=t.defer();return e.post("http://52.19.92.65/api/profile/languages/",{data:a}).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({text:e.data[a].language,id:e.data[a].id});r.resolve({languages:t})})["catch"](function(e){r.reject(e)}),r.promise},"delete":function(a){var r=t.defer();return e["delete"]("http://52.19.92.65/api/profile/languages/"+a).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({text:e.data[a].language,id:e.data[a].id});r.resolve({languages:t})})["catch"](function(e){r.reject(e)}),r.promise}}}function SettingsPictures(e,t){return{getFromJSON:function(a){var r=t.defer(),n="",i=[],o="http://52.19.92.65/api/profile/pictures/";return e.get(o).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({src:"http://52.19.92.65"+e.data[a].picture_100,id:e.data[a].id});r.resolve({pictures:t})})["catch"](function(e){r.reject(e)}),r.promise},update:function(a){var r=t.defer();return e.post("http://52.19.92.65/api/profile/pictures/",a,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({src:"http://52.19.92.65"+e.data[a].picture_100,id:e.data[a].id});r.resolve({pictures:t})})["catch"](function(e){r.reject(e)}),r.promise},"delete":function(a){var r=t.defer();return e["delete"]("http://52.19.92.65/api/profile/pictures/"+a).then(function(e){var t=[];if(e.data&&e.data.length)for(var a in e.data)t.push({src:"http://52.19.92.65"+e.data[a].picture_100,id:e.data[a].id});r.resolve({pictures:t})})["catch"](function(e){r.reject(e)}),r.promise}}}function Profile(e,t,a,r){return{profile:null,load:function(){var e=this,a={gender:"m",age:30,first_name:"Ollie",last_name:"Bolland",tags:["Ice Cream"],languages:["English","French"],preferences:{gender:"f",min_age:25,max_age:40,radius:40},contacts:{phone_number:"07894563899",address:"London",snapchat:"olligopoly",twitter:"olligopoly",facebook:"obolland",instagram:"obolland",whatsapp:"07894563899",email:"obolland@gmail.com"}};if(this.profile){var r=t.defer();return r.resolve(e.profile),r.promise}return t.all([]).then(function(t){if(t&&t[0]){var r=t[0].data;r.preferences=t[1].data,r.contacts=t[2].data}else{var r={};r.preferences={},r.contacts={}}return e.userId=r.id,e.profile={userId:r.id,email:r.email?r.email:a.contacts.email,first_name:r.first_name?r.first_name:a.first_name,last_name:r.last_name?r.last_name:a.last_name,gender:r.gender?r.gender:a.gender,age:r.age?r.age:a.age,tags:r.tags?r.tags:[],languages:r.languages?r.languages:[],photos:r.photos,radius:r.preferences&&r.preferences.radius?r.preferences.radius:a.preferences.radius,preferences:r.preferences&&r.preferences.min_age?r.preferences:a.preferences,contacts:r.contacts&&r.contacts.phone_number?r.contacts:a.contacts},console.log(r,e.profile),e.profile})["catch"](function(e){return e})},save:function(n){var i=this;return t.all([e({method:"PATCH",url:"http://"+r+"/api/users/"+i.userId+"/",headers:{Authorization:"Token "+a.apiKey,"Content-Type":"application/x-www-form-urlencoded"},data:$.param({gender:n.gender,first_name:n.first_name,last_name:n.last_name,tags:JSON.stringify(n.tags),age:n.age})}),e({method:"PUT",url:"http://"+r+"/api/users/preferences/",headers:{Authorization:"Token "+a.apiKey},data:{gender:n.preferences.gender,min_age:n.preferences.min_age,max_age:n.preferences.max_age}})]).then(function(e){return e})["catch"](function(e){return e})},saveContacts:function(t){return e({method:"POST",url:"http://"+r+"/api-rest/profile/contact/",data:t,headers:{Authorization:"Token "+a.apiKey}}).then(function(e){return e.data})["catch"](function(e){return e})}}}angular.module("givmeApp.services").factory("Profile",Profile),angular.module("givmeApp.services").factory("SettingsContact",["$http","$q",SettingsContact]),angular.module("givmeApp.services").factory("SettingsDiscovery",["$http","$q",SettingsDiscovery]),angular.module("givmeApp.services").factory("SettingsTags",["$http","$q",SettingsTags]),angular.module("givmeApp.services").factory("SettingsLanguages",["$http","$q",SettingsLanguages]),angular.module("givmeApp.services").factory("SettingsPictures",["$http","$q",SettingsPictures]);