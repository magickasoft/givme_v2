"use strict";function PlayPersonPreview(){return function(e){return e.photos.forEach(function(e){e.active=!1}),e.photos[0].active=!0,{name:e.name,age:e.age,antagonist:e.antagonist,showInfo:!1,showIceBreakers:!0,showLanguages:!1,animateChange:!1,rejected:!1,accepted:!1,left:"0px",photos:e.photos,languages:e.languages,iceBreakers:e.iceBreakers,onAccept:e.onAccept,onReject:e.onReject,prevPhoto:"",currentPhoto:"",domId:e.domId,setAntagonist:function(e){this.antagonist=e},showInformation:function(){this.accepted||this.rejected||("0"!=this.left&&(this.left="0"),this.showInfo=!0),$("#"+this.domId).find(".slide-flip-block").flip("toggle")},switchToIceBreakers:function(){this.showInfo&&(this.showIceBreakers=!0,this.showLanguages=!1)},switchToLanguages:function(){this.showInfo&&(this.showIceBreakers=!1,this.showLanguages=!0)},selectedPhoto:function(){return this.photos.filter(function(e){return e.active})[0].full},selectPhoto:function(e){this.showInfo=!1,this.showIceBreakers=!0,this.showLanguages=!1,this.left="0",e.full!==this.selectedPhoto()&&(this.prevPhoto=this.selectedPhoto(),this.animateChange=!0,$("#"+this.domId).find(".prev-photo").addClass("visible")),this.photos.forEach(function(e){e.active=!1}),e.active=!0,this.currentPhoto=this.selectedPhoto();var t=this;setTimeout(function(){$("#"+t.domId).find(".slide-flip-block").flip(!1),$("#"+t.domId).find(".prev-photo").removeClass("visible")},50)},propose:function(e){return this.accepted||this.rejected?void 0:e.gesture.velocityX>1.8?(this.left="0",void(e.gesture.deltaX>0?this.accept():this.reject())):void(e.gesture.deltaX>0?this.left="70px":this.left="-70px")},accept:function(){this.accepted||this.rejected||(this.left="0",this.showInfo=!1,this.showIceBreakers=!1,this.showLanguages=!1,this.accepted=!0,this.rejected=!1,this.onAccept&&this.onAccept())},reject:function(){this.rejected||this.accepted||(this.left="0",this.showInfo=!1,this.showIceBreakers=!1,this.showLanguages=!1,this.accepted=!1,this.rejected=!0,this.onReject&&this.onReject())}}}}angular.module("givmeApp.services").factory("PlayPersonPreview",[PlayPersonPreview]);