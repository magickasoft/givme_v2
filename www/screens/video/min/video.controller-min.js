"use strict";function VideoCtrl(i,e,n,o){window.plugins;var t=n(function(){},1e3);i.secondsRemain=300,i.hideVideo=!1;var c=n(function(){i.secondsRemain--,0==i.secondsRemain&&(l.disconnect(),window.plugins&&window.plugins.insomnia.allowSleepAgain(),n.cancel(t),n.cancel(c),e.go("sending-contact-card"))},1e3),d=45417102,a="2_MX40NTQxNzEwMn5-MTQ0ODI2NjQ2NDg2OX5HZGxTOEJ4VWVZOFM5V1ErNjdDRUJMeER-UH4",s="T1==cGFydG5lcl9pZD00NTQxNzEwMiZzaWc9ZTMwNDI1MjQ3ZDVjNDM0ODMwNjdkMDBhMGEwNTc5ZjQ4NmY2NmYyZDpyb2xlPXB1Ymxpc2hlciZzZXNzaW9uX2lkPTJfTVg0ME5UUXhOekV3TW41LU1UUTBPREkyTmpRMk5EZzJPWDVIWkd4VE9FSjRWV1ZaT0ZNNVYxRXJOamREUlVKTWVFUi1VSDQmY3JlYXRlX3RpbWU9MTQ0ODI2NjQ2NiZub25jZT0wLjM3MzIxOTY4MzI3ODM5MTYmZXhwaXJlX3RpbWU9MTQ0ODI3MDA1OSZjb25uZWN0aW9uX2RhdGE9";if(1==OT.checkSystemRequirements()){var l=OT.initSession(d,a);i.session=l,l.connect(s,function(i){i&&console.log(i.message)}),l.on({sessionConnected:function(i){console.log("connected to session");var e={width:80,height:100},n=OT.initPublisher("yourVideoItem",e);l.publish(n)},streamCreated:function(i){var e=i.stream;l.subscribe(e,"screen",{height:window.innerHeight,width:window.innerWidth})}})}else alert("The client does not support WebRTC");i.disconnect=function(){try{i.session.disconnect()}catch(o){console.log(o)}n.cancel(t),n.cancel(c),e.go("sending-contact-card")},i.$on("ngRepeatFinished",function(e){$("#interrupted").on("show.bs.modal",function(){i.$apply(function(){i.hideVideo=!0}),$("#info_link").removeClass("info-icon"),$("div.relative img:eq(0)").attr("src","img/blurd-pic.png"),$("div.relative div.chat-thumb img:eq( 0 )").hide()}).on("hide.bs.modal",function(){i.$apply(function(){i.hideVideo=!1}),$("#info_link").addClass("info-icon"),$("div.relative img:eq(0)").attr("src","img/video-chat-pic.png"),$("div.relative div.chat-thumb img:eq( 0 )").show()}),$("#reason").on("show.bs.modal",function(){i.$apply(function(){i.hideVideo=!0}),$("div.relative img:eq(0)").attr("src","img/blurd-pic.png"),$("div.relative div.chat-thumb img:eq( 0 )").hide()}).on("hide.bs.modal",function(){i.$apply(function(){i.hideVideo=!0}),$("div.relative img:eq(0)").attr("src","img/video-chat-pic.png"),$("div.relative div.chat-thumb img:eq( 0 )").show()}),$("#weakConnection").on("show.bs.modal",function(){i.$apply(function(){i.hideVideo=!0}),$("div.relative img:eq(0)").attr("src","img/blurd-pic.png"),$("div.relative div.chat-thumb img:eq( 0 )").hide()}).on("hide.bs.modal",function(){i.$apply(function(){i.hideVideo=!0}),$("div.relative img:eq(0)").attr("src","img/video-chat-pic.png"),$("div.relative div.chat-thumb img:eq( 0 )").show()})})}angular.module("givmeApp.controllers").controller("VideoCtrl",["$scope","$state","$interval","$timeout",VideoCtrl]);